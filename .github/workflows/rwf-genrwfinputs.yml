name: Generate Input Strings for Re-usable Workflows

on:
  workflow_call:
    inputs:
      block:
        required: true
        type: string
      testsuite:
        required: true
        type: string
      block-suffix:
        type: string
        default: ''
      block-prefix:
        type: string
        default: ''
      runner-name:
        required: true
        type: string
        default: ubuntu-latest
    outputs:
      checkout-root-dir:
        description: "Check Root Director"
        value: ${{ jobs.gen-rwf-inputs.outputs.checkout-root-dir }}
      checkout-path:
        description: "Check Root Director"
        value: ${{ jobs.gen-rwf-inputs.outputs.checkout-path }}        
      block-name:
        description: "Block Name"
        value: ${{ jobs.gen-rwf-inputs.outputs.block-name }}
      runner-name:
        description: "Runner Name"
        value: ${{ jobs.gen-rwf-inputs.outputs.block-name }}
jobs:
  gen-rwf-inputs:
    name: Generate RWF Inputs
    runs-on: "${{ inputs.runner-name }}"
    defaults:
      run:
        shell: tcsh {0}  
    outputs:
      checkout-root-dir: ${{ steps.checkout-root-dir.outputs.uppercase }}
      checkout-path: ${{ steps.checkout-path.outputs.path }}  
      block-name: ${{ steps.block-name.outputs.lowercase }}
      runner-name: ${{ steps.runner-name.outputs.lowercase }}
    steps:
      - id: checkout-root-dir
        uses: ASzc/change-string-case-action@v6
        with:
          string: ${{ inputs.block-prefix }}${{ inputs.block }}${{ inputs.block-suffix }}
      - id: checkout-path
        run: echo "path=${{ steps.checkout-root-dir.outputs.uppercase }}/${{ github.actor }}/${{ github.event_name }}/${{ github.run_number }}" >> $GITHUB_OUTPUT
      - id: block-name
        uses: ASzc/change-string-case-action@v6
        with:
          string: ${{ inputs.block }}
      - id: runner-name
        uses: ASzc/change-string-case-action@v6
        with:
          string: ${{ inputs.runner-name }}  
